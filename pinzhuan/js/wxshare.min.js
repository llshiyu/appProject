window.wxshare=function(){function c(c){if($.extend(a,c),!b)return void d();if(window.wx){var e=window.wx;e.onMenuShareTimeline({title:a.timelineText||a.desc,link:a.timelineLink||a.link,imgUrl:a.timelineImgUrl||a.imgUrl,success:function(){window._hmt&window._hmt.push(["_trackEvent","wxshare","Timeline","分享到朋友圈成功"]),a.onSuccess&&a.onSuccess()},cancel:function(){window._hmt&window._hmt.push(["_trackEvent","wxshare","Timeline","分享到朋友圈取消"]),a.onCancel&&a.onCancel()}}),e.onMenuShareAppMessage({title:a.friendTitle||a.title,desc:a.friendDesc||a.desc,link:a.friendLink||a.link,imgUrl:a.friendImgUrl||a.imgUrl,type:"",dataUrl:"",success:function(){window._hmt&window._hmt.push(["_trackEvent","wxshare","AppMessage","分享给好友成功"]),a.onSuccess&&a.onSuccess()},cancel:function(){window._hmt&window._hmt.push(["_trackEvent","wxshare","AppMessage","分享给好友取消"]),a.onCancel&&a.onCancel()}}),e.onMenuShareQQ(a),e.onMenuShareWeibo(a),e.onMenuShareQZone(a)}}function d(){var d=this;if(!d.success&&!d.running){d.running=!0;var e=location.href.split("#")[0];e=encodeURIComponent(e),$.ajax({url:"http://bdaladdin.duapp.com/wxshare/api/",data:{url:e},dataType:"jsonp",success:function(e){if("ok"==e.status&&window.wx){var f=window.wx,g=window.location.search.indexOf("__wxdebug__=1")!==-1;f.config({debug:g,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),f.ready(function(){b=!0,c(a)}),d.success=!0}},complete:function(){d.running=!1}})}}var a={title:"微信分享标题",desc:"微信分享描述",link:"微信分享链接",imgUrl:"微信分享图片",timelineText:null,timelineLink:null,timelineImgUrl:null,friendTitle:null,friendDesc:null,friendLink:null,friendImgUrl:null,onSuccess:null,onCancel:null},b=!1;return{config:c}}();